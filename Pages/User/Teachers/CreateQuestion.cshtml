@page
@model api.Pages.User.Teachers.CreateQuestionModel
@{
    ViewData["Title"] = "Create Question";
    Layout = "~/Pages/Shared/_LayoutTeacher.cshtml";

}

<div class="container mt-5">
    <h2 class="mb-4">Create New Question</h2>

    <form method="post" class="needs-validation" novalidate>
        <div class="mb-3">
            <label asp-for="Question.Content" class="form-label">Question Content</label>
            <textarea asp-for="Question.Content" class="form-control" rows="3" required></textarea>
        </div>

        <div class="mb-3">
            <label asp-for="Question.Level" class="form-label">Difficulty Level (e.g. 0 - 10)</label>
            <input asp-for="Question.Level" type="number" step="0.1" class="form-control" required />
        </div>

        <div class="form-check form-switch mb-4">
            <input asp-for="Question.IsMultipleChoice" class="form-check-input" type="checkbox" id="mcToggle" />
            <label class="form-check-label" for="mcToggle">Is this a Multiple Choice Question?</label>
        </div>

        <!-- Multiple Choice Section -->
        <div id="multipleChoiceFields" class="border p-3 rounded bg-light mb-4" style="display: none;">
            <div class="mb-3">
                <label for="ChoicesInput" class="form-label">Choices (One per line)</label>
                <textarea name="ChoicesInput" class="form-control" rows="4" placeholder="A\nB\nC\nD"></textarea>
            </div>

            <div class="mb-3">
                <label for="CorrectAnswerIndex" class="form-label">Correct Answer (Index or Letter e.g. 0 or A)</label>
                <input name="CorrectAnswerIndex" class="form-control" placeholder="0 or A" />
                <div class="form-text">You can input either the index (e.g. 0, 1) or letter (A, B...)</div>
            </div>
        </div>

        <!-- Input Answer Section -->
        <div id="inputAnswerField" class="border p-3 rounded bg-light mb-4" style="display: none;">
            <div class="mb-3">
                <label for="CorrectInputAnswer" class="form-label">Correct Answer (Text)</label>
                <input name="CorrectInputAnswer" class="form-control" placeholder="Enter the correct answer" />
            </div>
        </div>

        <button type="submit" class="btn btn-primary">Create Question</button>
    </form>
</div>

@section Scripts {
    <script>
        function toggleFields() {
            const isMC = document.getElementById("mcToggle").checked;
            document.getElementById("multipleChoiceFields").style.display = isMC ? "block" : "none";
            document.getElementById("inputAnswerField").style.display = isMC ? "none" : "block";
        }

        document.getElementById("mcToggle").addEventListener("change", toggleFields);

        // Run on page load
        window.addEventListener("DOMContentLoaded", toggleFields);
    </script>
}
